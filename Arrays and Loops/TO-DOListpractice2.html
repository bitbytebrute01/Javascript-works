<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ProductiveDay â€” Toâ€‘Do</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Inter:wght@300;400;600&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg: #071018;
      --panel: rgba(255, 255, 255, 0.04);
      --accent: #00ffd1;
      --muted: #9fb3c8;
      --text: #e6f1ff;
      --radius: 12px;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%;
      margin: 0;
      background: linear-gradient(180deg, #061018 0%, #081522 100%);
      color: var(--text);
      font-family: Inter, system-ui, Segoe UI, Roboto, Arial
    }

    .wrap {
      max-width: 840px;
      margin: 40px auto;
      padding: 20px;
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.02));
      border: 1px solid rgba(255, 255, 255, 0.04)
    }

    header {
      display: flex;
      align-items: center;
      gap: 14px
    }

    h1 {
      font-family: Orbitron, Inter, sans-serif;
      margin: 0;
      font-size: 28px;
      letter-spacing: 0.04em
    }

    p.lead {
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 14px
    }

    .controls {
      display: flex;
      gap: 8px;
      margin: 18px 0
    }

    .controls input[type="text"],
    .controls input[type="date"] {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
      outline: none
    }

    .controls button {
      padding: 0 14px;
      border-radius: 10px;
      border: 0;
      background: linear-gradient(90deg, #7a5cff, #00ffd1);
      color: #031016;
      font-weight: 700;
      cursor: pointer
    }

    .stats {
      display: flex;
      gap: 10px;
      color: var(--muted);
      font-size: 13px
    }

    .tasks {
      margin-top: 14px;
      display: flex;
      flex-direction: column;
      gap: 10px
    }

    .task {
      display: flex;
      gap: 12px;
      align-items: center;
      padding: 10px;
      border-radius: 12px;
      background: var(--panel);
      border: 1px solid rgba(255, 255, 255, 0.04)
    }

    .task .title {
      flex: 1;
      font-size: 15px
    }

    .task.completed {
      opacity: 0.7;
      border-color: rgba(0, 255, 209, 0.12)
    }

    .date {
      font-size: 13px;
      color: var(--muted);
      padding: 6px 8px;
      border-radius: 999px;
      background: rgba(0, 255, 209, 0.04);
      border: 1px solid rgba(0, 255, 209, 0.06)
    }

    .icon-btn {
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 8px;
      border-radius: 8px;
      cursor: pointer
    }

    .empty {
      padding: 28px;
      border-radius: 12px;
      border: 1px dashed rgba(255, 255, 255, 0.05);
      text-align: center;
      color: var(--muted)
    }

    @media (max-width:600px) {
      .controls {
        flex-direction: column
      }

      .controls input[type="text"] {
        order: 0
      }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1>ProductiveDay</h1>
    </header>
    <p class="lead">Plan your day â€” quick, local, and private.</p>

    <div class="controls" role="region" aria-label="Add task">
      <input id="taskInput" type="text" placeholder="What needs to be done?" aria-label="Task name">
      <input id="taskDate" type="date" aria-label="Due date">
      <button id="addBtn" aria-label="Add task">+ Add</button>
    </div>

    <div class="stats">
      <div id="total">Total: 0</div>
      <div id="done">Completed: 0</div>
    </div>

    <div id="tasks" class="tasks" aria-live="polite"></div>
  </div>

  <script>
    (function () {
      const STORAGE_KEY = 'productiveDay.items.v1';
      let items = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

      const $input = document.getElementById('taskInput');
      const $date = document.getElementById('taskDate');
      const $add = document.getElementById('addBtn');
      const $tasks = document.getElementById('tasks');
      const $total = document.getElementById('total');
      const $done = document.getElementById('done');

      function save() { localStorage.setItem(STORAGE_KEY, JSON.stringify(items)); }

      function formatDisplayDate(dateStr) {
        if (!dateStr) return '';
        const d = new Date(dateStr);
        if (isNaN(d)) return '';
        const today = new Date(); today.setHours(0, 0, 0, 0);
        const td = new Date(d.getFullYear(), d.getMonth(), d.getDate());
        const diff = Math.round((td - today) / (24 * 60 * 60 * 1000));
        if (diff === 0) return 'Today';
        if (diff === 1) return 'Tomorrow';
        const opts = { month: 'short', day: 'numeric' };
        if (d.getFullYear() !== today.getFullYear()) opts.year = 'numeric';
        return d.toLocaleDateString(undefined, opts);
      }

      function render() {
        $tasks.innerHTML = '';
        if (items.length === 0) {
          const empty = document.createElement('div');
          empty.className = 'empty';
          empty.innerHTML = '<strong>No tasks yet</strong><div style="margin-top:8px;color:var(--muted)">Add a task to get started</div>';
          $tasks.appendChild(empty);
          updateStats();
          return;
        }

        items.forEach((task, idx) => {
          const row = document.createElement('div');
          row.className = 'task' + (task.completed ? ' completed' : '');

          const cb = document.createElement('input');
          cb.type = 'checkbox';
          cb.checked = !!task.completed;
          cb.setAttribute('aria-label', 'Mark complete');
          cb.addEventListener('change', () => toggleComplete(idx));

          const title = document.createElement('div');
          title.className = 'title';
          title.textContent = task.name || '(no title)';
          title.title = task.name || '';

          const dateSpan = document.createElement('div');
          dateSpan.className = 'date';
          const disp = formatDisplayDate(task.date);
          dateSpan.textContent = disp;
          if (!disp) dateSpan.style.display = 'none';

          const editBtn = document.createElement('button');
          editBtn.className = 'icon-btn';
          editBtn.title = 'Edit';
          editBtn.innerHTML = 'âœŽ';
          editBtn.addEventListener('click', () => editItem(idx));

          const delBtn = document.createElement('button');
          delBtn.className = 'icon-btn';
          delBtn.title = 'Delete';
          delBtn.innerHTML = 'ðŸ—‘';
          delBtn.addEventListener('click', () => deleteItem(idx));

          row.appendChild(cb);
          row.appendChild(title);
          row.appendChild(dateSpan);
          row.appendChild(editBtn);
          row.appendChild(delBtn);

          $tasks.appendChild(row);
        });

        updateStats();
      }

      function updateStats() {
        const total = items.length;
        const done = items.filter(i => i.completed).length;
        $total.textContent = `Total: ${total}`;
        $done.textContent = `Completed: ${done}`;
      }

      function addItem() {
        const name = $input.value.trim();
        const date = $date.value || '';
        if (!name) return;
        items.push({ name, date, completed: false });
        save();
        render();
        $input.value = '';
        $date.value = new Date().toISOString().slice(0, 10);
        $input.focus();
      }

      function deleteItem(i) {
        if (i < 0 || i >= items.length) return;
        items.splice(i, 1);
        save();
        render();
      }

      function toggleComplete(i) {
        if (i < 0 || i >= items.length) return;
        items[i].completed = !items[i].completed;
        save();
        render();
      }

      function editItem(i) {
        if (i < 0 || i >= items.length) return;
        const current = items[i];
        const newName = prompt('Edit task name:', current.name);
        if (newName === null) return; // cancelled
        const trimmed = newName.trim();
        if (trimmed) current.name = trimmed;
        // optional: allow changing date (simple prompt yyyy-mm-dd)
        const newDate = prompt('Edit due date (YYYY-MM-DD) or leave blank:', current.date || '');
        if (newDate !== null) {
          const d = newDate.trim();
          current.date = d === '' ? '' : d;
        }
        save();
        render();
      }

      // init
      $date.value = new Date().toISOString().slice(0, 10);
      render();

      // events
      $add.addEventListener('click', addItem);
      $input.addEventListener('keydown', (e) => { if (e.key === 'Enter') addItem(); });

      // expose for debugging (optional)
      window._productive = { items, render };
    })();
  </script>
</body>

</html>